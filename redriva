#!/usr/bin/env bash
set -e

# Auto-élévation root
if [[ "$EUID" -ne 0 ]]; then
  exec sudo "$0" "$@"
fi

BASE_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Charger le core (fonctions uniquement)
source "$BASE_DIR/core/loader.sh"

# Dispatch des commandes
case "$1" in
  menu|"")
    redriva_menu
    ;;
  action)
    shift
    redriva_action "$@"
    ;;
  list)
    redriva_list_actions
    ;;
  *)
    echo "Usage:"
    echo "  redriva menu"
    echo "  redriva action <name>"
    echo "  redriva list"
    exit 1
    ;;
esac
